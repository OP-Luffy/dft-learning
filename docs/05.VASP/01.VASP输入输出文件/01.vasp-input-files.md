---
title: VASP的输入文件
date: 2020-11-19 13:28:10
permalink: /pages/69b75c/
categories: 
  - VASP
tags: 
  - 
---

# VASP的输入文件

VASP运行至少包含四个输入文件：`INCAR`、`POSCAR`、`POTCATR`、`KPOINTS`。

## INCAR

INCAR 是VASP运行的**控制文件**，他告诉VASP要**做什么以及如何去做**。INCAR文件中包含很多标签及其对应的值，通过修改他们来修改VASP运行的参数。

标签的含义可以查 [下一页](/pages/4f0a58/) 和 [VASP手册](https://www.vasp.at/wiki/index.php/Category:INCAR) 。

## POSCAR

POSCAR是个**结构文件**，他告诉VASP要运行的是什么物质。该文件包含晶格几何形状和离子位置等。

这是一个POSCAR文件的示例：

```
O2 molecule           # 注释行
10                    # 比例，提供了通用缩放因子（晶格常数）
1.0 0.0 0.0           # 3-5行 格矢
0.0 1.0 0.0
0.0 0.0 1.0
O                     # 元素类别（与它们在POTCAR文件中的顺序一致）
2                     # 原子数量
Selective Dynamic     # 
Direct                # 坐标类别：分数/笛卡尔
0.5 0.5 0.5    F F F  # 每个原子的三个(X Y Z)坐标。
0.5 0.5 0.623  F F T
```

第8行：该模式允许为每个原子提供额外的标志，以指示在离子弛豫期间是否将允许更改此原子的相应坐标。如果仅缺陷周围的某些壳或表面附近的层应松弛，则此设置很有用。**这一行是可选的，如果省略了选择性动力学标签，则第八行将在笛卡尔和直角坐标之间进行切换，如下。**

```
O2 molecule           # 注释行
10                    # 比例，提供了通用缩放因子（晶格常数）
1.0 0.0 0.0           # 3-5行 格矢
0.0 1.0 0.0
0.0 0.0 1.0
O                     # 元素类别（与它们在POTCAR文件中的顺序一致）
2                     # 原子数量
Direct                # 坐标类别：分数/笛卡尔
0.5 0.5 0.5           # 每个原子的三个(X Y Z)坐标。
0.5 0.5 0.623  
```

第9行：（如果不启用选择性动力学，则为第8行）指定原子位置是在笛卡尔坐标系（cartesian coordinates）中还是在分数坐标（direct (fractional) coordinates）中提供。

分数坐标是把点阵矢量看成是单位矢量下确定原子位置; 笛卡尔坐标是绝对坐标，是直角坐标系与斜角坐标系的统称，考虑点阵常数的大小。 

Basically, the fractional coordinates show the fraction of each unit cell vector that contributes to the position of that atom。根本上来说，分数坐标给出了每个原子在元胞的相对位置 

晶格参数： 

$$
\begin{aligned}
  &A (A_x  A_y  A_z)\qquad    & 2.46\qquad     & 0.00\qquad     & 0.00   \\
  &B (B_x  B_y  B_z)\qquad    &-1.23\qquad     & 2.13\qquad     & 0.00   \\
  &C (C_x  C_y  C_z)    & 0.00\qquad     & 0.00\qquad     & 10.00  \\
\end{aligned}


$$

一个点的分数坐标   （a, b, c）=（0.667， 0.333， 0） 

$$
\begin{aligned}
  &x = A_xa+B_xb+C_xc = &2.46*0.667&-&1.23*0.333&+&0*0&=1.23    \\
  &y = A_ya+B_yb+C_yc = &0*0.667&+&2.13*0.333&+&0*0&=0.71    \\
  &z = A_za+B_zb+C_zc = &0*0.667&+&0*0.333&+&10*0&=0 
\end{aligned}

$$

这个点的笛卡尔坐标 （x, y, z）= (1.23，0.71， 0) 

所以，笛卡尔坐标并不是原子在我们作为参考的直角坐标系中的绝对位置，而是在元胞基矢构成坐标系中，原子的绝对位置，而分数坐标，就是原子在元胞基矢构成坐标系中原子的相对位置。对于一个斜角坐标系，显然原子的相对位置比较好判断，所以，我们一般在POSCAR中用到的是其分数坐标，如果需要用到笛卡尔坐标，就用上面的公式转换。

抽象一些，用矩阵表示，对于以下两种坐标系：

$$
\begin{aligned}
& \text{system\_name}                          &\     & \text{system\_name}           \\
& \text{lattice\_constant\_1}                  &\     & \text{lattice\_constant\_2}   \\
&  \begin{matrix}
A_{x} & A_{x} & A_{x} \\
B_{x} & B_{y} & B_{y} \\
C_{x} & C_{z} & C_{z}
\end{matrix}          &\   
&  \begin{matrix}
A_{x} & A_{x} & A_{x} \\
B_{x} & B_{y} & B_{y} \\
C_{x} & C_{z} & C_{z}
\end{matrix}\\
& \text{elements\_type}                         &\    & \text{elements\_type}         \\
& \text{atom\_number}                           &\    & \text{atom\_number}           \\
& \text{Direct}                                 &\    & \text{Cartesion}              \\
&   \begin{matrix}
   X_{11} & X_{12} & X_{13} \\
   X_{21} & X_{22} & X_{23} \\
   X_{31} & X_{32} & X_{33}
  \end{matrix} 
  &
&   \begin{matrix}
   x_{11} & x_{12} & x_{13} \\
   x_{21} & x_{22} & x_{23} \\
   x_{31} & x_{32} & x_{33}
  \end{matrix} \\
\end{aligned} 
$$

有

$$
\left[
 \begin{matrix}
  X_{11} & X_{12} & X_{13} \\
  X_{21} & X_{22} & X_{23} \\
  X_{31} & X_{32} & X_{33}
 \end{matrix}
\right]
*
\left[
 \begin{matrix}
  A_{x} & A_{x} & A_{x} \\
  B_{x} & B_{y} & B_{y} \\
  C_{x} & C_{z} & C_{z}
 \end{matrix}
\right]
*lattice\_content\_1 \\
=
\left[
 \begin{matrix}
  x_{11} & x_{12} & x_{13} \\
  x_{21} & x_{22} & x_{23} \\
  x_{31} & x_{32} & x_{33}
 \end{matrix}
\right]
*lattice\_content\_2
$$

vaspkit 411-412可以转换。

> 参考：
> 
> [vasp的POSCAR文件中的Direct坐标和Cartesion坐标的关系 - 小木虫](http://muchong.com/html/201708/6640507.html)
>
> [POSCAR - VaspWiki](https://www.vasp.at/wiki/index.php/POSCAR)
>
> [POSCAR关于分数坐标与笛卡尔坐标写法问题 - 郝玲娟xueer的新浪博客](http://blog.sina.com.cn/s/blog_17589e0920102xhee.html)
>
> [笛卡尔坐标系 - 维基百科](https://zh.wikipedia.org/wiki/%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB)

::: tip
8行9行均只识别第一个字母。即VASP识别的唯一关键字符是`C`or`c` for `cartesian mode`，`D`or`d`for `direct mode`，`S`or`s`for `Select`。
:::




## POTCAR

赝势文件。POTCAR文件包含计算中使用的每个原子种类的赝势。如果物种数量大于一个，则**按照POSCAR中原子的顺序**合并每个物种的POTCAR文件。

其他见：https://www.bigbrosci.com/2017/10/18/ex1_05_vasp_preparation_input_potcar/

## KPOINTS

K点取样文件。KPOINTS文件用于指定Bloch矢量（k点），这些矢量将用于在计算中对布里渊区进行采样。

可以使用几种不同的方法在KPOINTS文件中指定k点：（1）作为自动生成的（移位的）常规点网格；（2）通过线段的起点和终点；或（ 3）作为点和权重的明确列表。

```
K-POINTS      #  第一行随便写都行，但不能没有
 0             # 零，格子自动生成
Gamma         #  gamma点centered 
1 1 1         #  1*1*1格子
0 0 0         #  S1 S2 S3， 一般保持 0 0 0 不变。
```

**详解:**

- 该KPOINTS 文件里面，共有5行，#号以及后面的不用输入；
- 同INCAR的注释一样，不要在每一行后面使用 ! 来进行注释，要使用 #，且最好不要写中文。
- 第一行：可以随便写内容，但不能没有;
- 第二行：数字0，不是字母O，0 在这里表示的是自动生成K点。你可能注意到了，0前面有个空格，不过没关系，对计算不影响，可以删掉，也可以再加一个空格，后面的同样如此。 但是避免用tab输入，VASP有时候不识别tab键输入的空白部分，导致计算出错；
- 第三行：VASP只认第一个字母，大小写均可。在这里Gamma和gamma，Gorge，gorge效果是一样的，当然这一行也可以直接写字母G或者g。
  - G表示的是以gamma点为中心生成网格。
  - 另外一种是原始的Monkhorst-Pack 网格，两者的区别是 M 或者 m 在 G的基础上在三个方向上平移了1/（2N）个单位。
  - G，也叫 gamma centered Monkhorst-Pack Grid；所以，gamma centered 只是MP网格的一种特殊情况。
- 第四行，在xyz三个方向上生成对应数目的K点，本例是111;
  - 对于原子或者分子的计算，K点取一个gamma点就够了（1 1 1），也就是这个KPOINTS文件可以用于绝大多数的原子或者分子计算，不用再修改；
  - 但如果你要用ISMEAR = -5 来计算能量，那么就需要把 1 1 1 改成 2 2 2或者3 3 3。
- 第五行，一般都写成 0 0 0 ，不用动即可；
- 按照前面INCAR的方式保存文件，名字为KPOINTS。

**KPOINTS的建议:**

K点在VASP计算中非常重要，大师兄给的一个建议是：

- 一直用gamma centered，也就是第三行保持G不变。因为M平移之后，网格的对称性和晶胞的对称性会出现不匹配的情况，从而导致计算出错，尤其是对于六角晶系hexagonal的结构，必须用gamma centered!这一点，vasp官网说的很明确；其他的建议后续慢慢展开讨论。
- 如非六角晶系的计算，如果已经设置的M算起来了，继续用M算就行，没必要改成G再重新算一遍；
- 前面看不懂，没事。**记住这一点，本节就圆满完成任务**：气体分子，原子计算的时候，使用gamma点即可。

> K点部分抄自大师兄网站：https://www.bigbrosci.com/2017/10/16/ex1_03_vasp_preparation_input_kpoints/



手册：[KPOINTS - Vaspwiki](https://www.vasp.at/wiki/index.php/KPOINTS)



---

还有一些其他的文件：[Category:Input Files - vaspwiki](https://www.vasp.at/wiki/index.php/Category:Input_Files) .